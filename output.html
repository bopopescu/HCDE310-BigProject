<!doctype html>
<html lang="en">
  <head>
    <title>Track My Traffic</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
	<style>
       #map {
        height: 400px;
        width: 100%;
       }
    </style>
  </head>
  <body>
		<div class="container">
		<!--Header and Navbar-->
		<h1>Track My Traffic</h1>
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
		  <a class="navbar-brand" href="#"></a>
		  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		  </button>
		  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
			<div class="navbar-nav">
			  <a class="nav-item nav-link active" href="#Location">Home <span class="sr-only">(current)</span></a>
			  <a class="nav-item nav-link" href="#Weather">Weather</a>
			  <a class="nav-item nav-link" href="#Traffic">Traffic</a>
			  <a class="nav-item nav-link" href="#Incidents">Incidents</a> 
			</div>
		  </div>
		</nav>
		<!--Main Content-->
		<div id = "Location">
			<h2>Location Information</h2>
			<input id = "locbutt" type="button" value="Use Accurate Location" name="getLoc" onclick="getLocation()"/><b id = "warning">Warning: Your location is inaccurate.</b>
			<strong id = "locDesc"></strong>
			<p id = "cord">
				Coordinates: <b id = "lat" value = 47.6344>47.6344</b>, <b id = "lon" value = -122.3422>-122.3422</b>
			</p>
			<p></p>
			<script>
				function getLocation(){
					if (navigator.geolocation) {
						navigator.geolocation.getCurrentPosition(fillPosition);
					}else{
						alert("Geolocation not supported");
					}
				}
				
				function fillPosition(position){
					var lat = document.getElementById("lat").innerHTML = position.coords.latitude;
					var lon = document.getElementById("lon").innerHTML = position.coords.longitude;
					//document.getElementById("lat").value = new Number(position.coords.latitude + 1);
					//document.getElementById("lon").value = new Number(position.coords.longitude + 1);
					initMap();
					document.getElementById("warning").innerHTML = "";
					document.getElementById("locbutt").style.display = 'none'; 
				}
			</script>
		</div>
		<div id = "Weather">
			<h2>Weather</h2>
			
				<strong>You are currently in the vicinity of Queen Anne, Seattle, Washington</strong>
				<table class="table table-bordered">
				  <thead>
					<tr>
					  <th scope="col">RIGHT NOW</th>
					</tr>
				  </thead>
				  <tbody>
					<tr>
					  <th scope="row">Weather</th>
					  <td>Mostly Cloudy</td>
					</tr>
					<tr>
					  <th scope="row">Temp</th>
					  <td>43.7 F (6.5 C)</td>
					</tr>
					<tr>
					  <th scope="row">Feels Like</th>
					  <td>40 F (4 C)</td>
					</tr>
					<tr>
					  <th scope="row">Wind</th>
					  <td>From the NNW at 6.5 MPH Gusting to 7.4 MPH</td>
					</tr>
				  </tbody>
				</table>
			
		</div>
		<div id = "Traffic">
			<h2>Traffic</h2>
			 <div id="map"></div>
			<script>
			  function initMap() {
				var current = new google.maps.LatLng(document.getElementById("lat").innerHTML, document.getElementById("lon").innerHTML);
				var map = new google.maps.Map(document.getElementById('map'), {
				  zoom: 12,
				  center: current
				});
				
				var trafficLayer = new google.maps.TrafficLayer();
				trafficLayer.setMap(map);
				
				var marker = new google.maps.Marker({
				  position: current,
				  map: map
				});
				//console.log(document.getElementById("lat").innerHTML);
				//console.log(document.getElementById("lon").innerHTML);
				//map.addListener('click',function(){
				//	update();
				//	window.setTimeout(function() {
				//	  map.panTo(center.getPosition());
				//	}, 3000);
				//});
				var image = 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png';
				
					//console.log('47.623215,-122.338463');
					var marker = new google.maps.Marker({
					position: new google.maps.LatLng(47.623215,-122.338463),
					map: map,
					icon: image
				});
				
					//console.log('47.606594,-122.336433');
					var marker = new google.maps.Marker({
					position: new google.maps.LatLng(47.606594,-122.336433),
					map: map,
					icon: image
				});
				
					//console.log('47.618252,-122.350777');
					var marker = new google.maps.Marker({
					position: new google.maps.LatLng(47.618252,-122.350777),
					map: map,
					icon: image
				});
				
					//console.log('47.659817,-122.314323');
					var marker = new google.maps.Marker({
					position: new google.maps.LatLng(47.659817,-122.314323),
					map: map,
					icon: image
				});
				
					//console.log('47.677284,-122.31739');
					var marker = new google.maps.Marker({
					position: new google.maps.LatLng(47.677284,-122.31739),
					map: map,
					icon: image
				});
				
					//console.log('47.623215,-122.338463');
					var marker = new google.maps.Marker({
					position: new google.maps.LatLng(47.623215,-122.338463),
					map: map,
					icon: image
				});
				
					//console.log('47.676582,-122.315674');
					var marker = new google.maps.Marker({
					position: new google.maps.LatLng(47.676582,-122.315674),
					map: map,
					icon: image
				});
				
					//console.log('47.655113,-122.372231');
					var marker = new google.maps.Marker({
					position: new google.maps.LatLng(47.655113,-122.372231),
					map: map,
					icon: image
				});
				
					//console.log('47.618252,-122.350777');
					var marker = new google.maps.Marker({
					position: new google.maps.LatLng(47.618252,-122.350777),
					map: map,
					icon: image
				});
				
					//console.log('47.618511,-122.332245');
					var marker = new google.maps.Marker({
					position: new google.maps.LatLng(47.618511,-122.332245),
					map: map,
					icon: image
				});
				
					//console.log('47.605412,-122.336914');
					var marker = new google.maps.Marker({
					position: new google.maps.LatLng(47.605412,-122.336914),
					map: map,
					icon: image
				});
				
			  }
			</script>
			<script async defer
			src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAkEKREhMHlD8RcsK0prnTn_fQJV2MRI7Y&callback=initMap">
			</script>
		</div>
		<div id = "Incidents">
			<h2>Incidents</h2>
			<table class="table table-sm table-light">
			  <thead>
				<tr>
				  <th scope="col">Description</th>
				  <th scope="col">Impact</th>
				  <th scope="col">Severity</th>
				  <th scope="col">Coordinates</th>
				</tr>
			  </thead>
			  <tbody>
				
					<tr>
						<td>Intermittent lane closures due to construction during the night on Republican St both ways between 9th St and Westlake Ave.</td>
							
							<td>False</td>
						
							<td>2</td>
						
							<td>47.623215,-122.338463</td>
						
					</tr>
				
					<tr>
						<td>Intermittent lane closures due to long-term construction on 2nd Ave Southbound from University St to Seneca St.</td>
							
							<td>False</td>
						
							<td>2</td>
						
							<td>47.606594,-122.336433</td>
						
					</tr>
				
					<tr>
						<td>Restrictions due to resurfacing work on 3rd Ave both ways between Virginia St and Broad St.</td>
							
							<td>True</td>
						
							<td>2</td>
						
							<td>47.618252,-122.350777</td>
						
					</tr>
				
					<tr>
						<td>Road closed due to construction on Brooklyn Ave both ways between 45th St and Brooklyn Ave / 43rd St.</td>
							
							<td>True</td>
						
							<td>2</td>
						
							<td>47.659817,-122.314323</td>
						
					</tr>
				
					<tr>
						<td>Road closed due to construction on 67th St both ways from 12th Ave to Roosevelt Way.</td>
							
							<td>True</td>
						
							<td>2</td>
						
							<td>47.677284,-122.31739</td>
						
					</tr>
				
					<tr>
						<td>Road closed due to construction during the night on Republican St Eastbound between 9th Ave and Westlake Ave.</td>
							
							<td>True</td>
						
							<td>2</td>
						
							<td>47.623215,-122.338463</td>
						
					</tr>
				
					<tr>
						<td>Road closed due to construction on 66th St Eastbound from Roosevelt Way to 12th Ave.</td>
							
							<td>True</td>
						
							<td>2</td>
						
							<td>47.676582,-122.315674</td>
						
					</tr>
				
					<tr>
						<td>One lane closed due to paving repairs on Nickerson St both ways between Etruria St and 13th Avenue.</td>
							
							<td>False</td>
						
							<td>2</td>
						
							<td>47.655113,-122.372231</td>
						
					</tr>
				
					<tr>
						<td>One lane closed due to construction work on 3rd Ave both ways from Blanchard St to Broad St.</td>
							
							<td>False</td>
						
							<td>2</td>
						
							<td>47.618252,-122.350777</td>
						
					</tr>
				
					<tr>
						<td>Road permanently closed due to electricity work on Pontius Ave both ways from John St / Pontius Ave to Denny Way.</td>
							
							<td>True</td>
						
							<td>2</td>
						
							<td>47.618511,-122.332245</td>
						
					</tr>
				
					<tr>
						<td>Intermittent lane closures due to long-term construction on 1st Ave both ways from University St to Spring St.</td>
							
							<td>False</td>
						
							<td>2</td>
						
							<td>47.605412,-122.336914</td>
						
					</tr>
				
			  </tbody>
			</table>
			
		</div>
	</div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
  </body>
</html>